extends layout

mixin build_block(version)
	table.table
		if version == 'PUBLIC'
			tr
				td(width='40%') Pull the git repository
				td(width='15%').text-center
					button(class='btn btn-primary run-pull') Pull src
				td
		tr
			td(width='40%') Build the bug challenge binary
			td(width='15%').text-center
				button(class='btn btn-primary run-build' data-version=version) Build bin
			td
		tr
			td(width='40%') Run all tests
			td(width='15%').text-center
				button(class='btn btn-primary run-all') Check all
			td

mixin table(version, tests)
	table.table
		thead
			tr
				th(width='40%') Test Name
				th(width='15%')
				th
		tbody
			each test in tests
				tr
					td
						a(href='/tests/#{test.version}/#{test.name}')= test.name
					td.text-center
						button(class='btn btn-primary run-test' data-version=version data-test=test.name) Check test
					td
		tfoot
			tr
				th(colspan='3') Count #{tests.length}

block content
	.tab-list
		ul(class="nav nav-pills" role="tablist")
			li(role="presentation" class="active")
				a(href="#private" aria-controls="private" role="tab" data-toggle="pill") Private

			li(role="presentation")
				a(href="#public" aria-controls="public" role="tab" data-toggle="pill") Public

	.tab-content
		div(role="tabpanel" class="tab-pane fade in active" id="private")
			h1 Build
			+build_block("PRIVATE")
			h1 Tests
			+table("PRIVATE", private)

		div(role="tabpanel" class="tab-pane fade" id="public")
			h1 Build
			+build_block("PUBLIC")
			h1 Tests
			+table("PUBLIC", public)
